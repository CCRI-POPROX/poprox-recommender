schema: '2.0'
stages:
  measure-mind-val:
    cmd: python -m poprox_recommender.evaluation.evaluate -M MINDlarge_dev mind-val
    deps:
    - path: data/MINDlarge_dev.zip
      hash: md5
      md5: c93fa1728e3537649b441c78cce5e6f1
      size: 103456245
    - path: outputs/mind-val/recommendations
      hash: md5
      md5: 8c73192e46f2d5871ffd70fc61d39ab6.dir
      size: 43055436
      nfiles: 4
    - path: src/poprox_recommender/evaluation/evaluate.py
      hash: md5
      md5: 0f27cab77b94b6d9f6e537237b65c1c1
      size: 4709
    outs:
    - path: outputs/mind-val/metrics.csv
      hash: md5
      md5: 5556086ac286ac35178bcba1e5681581
      size: 706
    - path: outputs/mind-val/profile-metrics.csv.gz
      hash: md5
      md5: db28d1c70783822fa1d61447979b228d
      size: 38010752
  recommend-mind-val:
    cmd: python -m poprox_recommender.evaluation.generate -M MINDlarge_dev -o outputs/mind-val
    deps:
    - path: data/MINDlarge_dev.zip
      hash: md5
      md5: c93fa1728e3537649b441c78cce5e6f1
      size: 103456245
    - path: models/nrms-mind/
      hash: md5
      md5: e1b38b965f2bcb3f36edf5a99f37cad7.dir
      size: 2224727458
      nfiles: 33
    - path: src/poprox_recommender/evaluation/generate/
      hash: md5
      md5: 72ce9f2c29f9f5835e0b8101f8df96a8.dir
      size: 12871
      nfiles: 4
    outs:
    - path: outputs/mind-val/embeddings.parquet
      hash: md5
      md5: 8e0ccaa5fd4d75e88bc9d3154aeab80c
      size: 20711326
    - path: outputs/mind-val/recommendations
      hash: md5
      md5: 8c73192e46f2d5871ffd70fc61d39ab6.dir
      size: 43055436
      nfiles: 4
  recommend-mind-small:
    cmd: python -m poprox_recommender.evaluation.generate -M MINDsmall_dev -o outputs/mind-small
    deps:
    - path: data/MINDsmall_dev.zip
      hash: md5
      md5: e3bac5485be8fc7a9934e85e3b78615f
      size: 30948560
    - path: models/nrms-mind/
      hash: md5
      md5: e1b38b965f2bcb3f36edf5a99f37cad7.dir
      size: 2224727458
      nfiles: 33
    - path: src/poprox_recommender/evaluation/generate/
      hash: md5
      md5: 72ce9f2c29f9f5835e0b8101f8df96a8.dir
      size: 12871
      nfiles: 4
    outs:
    - path: outputs/mind-small/embeddings.parquet
      hash: md5
      md5: a8cbad7ca5307e0b48d365eb2c75caee
      size: 16040182
    - path: outputs/mind-small/recommendations
      hash: md5
      md5: 4ebd3e5e48a5482e2e98cac5b0883315.dir
      size: 8350118
      nfiles: 4
  measure-mind-small:
    cmd: python -m poprox_recommender.evaluation.evaluate -M MINDsmall_dev mind-small
    deps:
    - path: data/MINDlarge_dev.zip
      hash: md5
      md5: c93fa1728e3537649b441c78cce5e6f1
      size: 103456245
    - path: outputs/mind-small/recommendations
      hash: md5
      md5: 4ebd3e5e48a5482e2e98cac5b0883315.dir
      size: 8350118
      nfiles: 4
    - path: src/poprox_recommender/evaluation/evaluate.py
      hash: md5
      md5: 0f27cab77b94b6d9f6e537237b65c1c1
      size: 4709
    outs:
    - path: outputs/mind-small/metrics.csv
      hash: md5
      md5: d749c1b5da44cce0d39dbb50450b67ab
      size: 699
    - path: outputs/mind-small/profile-metrics.csv.gz
      hash: md5
      md5: 87be17f2335a167ffb9e56876a359221
      size: 7385308
  recommend-mind-subset:
    cmd: python -m poprox_recommender.evaluation.generate -M MINDsmall_dev --subset=1000
      -o outputs/mind-subset
    deps:
    - path: data/MINDsmall_dev.zip
      hash: md5
      md5: e3bac5485be8fc7a9934e85e3b78615f
      size: 30948560
    - path: models/nrms-mind/
      hash: md5
      md5: 99c1d4b8c051bd207ca0929a87c26754.dir
      size: 1571629281
      nfiles: 21
    - path: src/poprox_recommender/evaluation/generate/
      hash: md5
      md5: f51a0713cc6f0231678a93360ab31718.dir
      size: 13480
      nfiles: 4
    outs:
    - path: outputs/mind-subset/embeddings.parquet
      hash: md5
      md5: 1e9c99747f6cb57a7c68b0088526e41b
      size: 5530157
    - path: outputs/mind-subset/recommendations
      hash: md5
      md5: 65f38626e07fb2e73b1e4adc2f8278c8.dir
      size: 231483
      nfiles: 4
  measure-mind-subset:
    cmd: python -m poprox_recommender.evaluation.evaluate -M MINDsmall_dev mind-subset
    deps:
    - path: data/MINDlarge_dev.zip
      hash: md5
      md5: c93fa1728e3537649b441c78cce5e6f1
      size: 103456245
    - path: outputs/mind-subset/recommendations
      hash: md5
      md5: a961117e24f222e0371b180f88fda6bf.dir
      size: 230071
      nfiles: 8
    - path: src/poprox_recommender/evaluation/evaluate.py
      hash: md5
      md5: d4d257da54b8c7408b3f870fe4802674
      size: 4940
    outs:
    - path: outputs/mind-subset/metrics.csv
      hash: md5
      md5: 2223ce7816f4856ffda90d3ff3309eea
      size: 782
    - path: outputs/mind-subset/profile-metrics.csv.gz
      hash: md5
      md5: 9815ef28edd0e302ef3cb8e7847855b1
      size: 99640