stages:
  recommend-mind-val:
    cmd: python -m poprox_recommender.evaluation.generate -o outputs/mind-val-recommendations.parquet
    deps:
      - src/poprox_recommender/evaluation/generate.py
      - data/MINDlarge_dev.zip
    outs:
      - outputs/mind-val-recommendations.parquet
  measure-mind-val:
    cmd: python -m poprox_recommender.evaluation.evaluate mind-val
    deps:
      - src/poprox_recommender/evaluation/evaluate.py
      - data/MINDlarge_dev.zip
      - outputs/mind-val-recommendations.parquet
    outs:
      - outputs/mind-val-user-metrics.csv.gz
    metrics:
      - outputs/mind-val-metrics.csv:
          cache: false
